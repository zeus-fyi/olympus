apiVersion: v1
kind: ConfigMap
metadata:
  name: cm-tx-fetcher
data:
  start.sh: |-
    #!/bin/sh
    exec geth \
      --datadir=/data \
      --port=30303 \
      --http \
      --http.addr=0.0.0.0 \
      --http.port=8545 \
      --http.vhosts=* \
      --http.corsdomain=* \
      --ws \
      --ws.addr=0.0.0.0 \
      --ws.port=8546 \
      --ws.origins=* \
      --authrpc.jwtsecret=/data/jwt.hex \
      --authrpc.addr=0.0.0.0 \
      --authrpc.port=8551 \
      --authrpc.vhosts=* \
      --http.api=txpool,eth,net,web3,txpool \
      --txpool.globalqueue=0 \
      --txpool.accountqueue=0 \
      --txpool.globalslots=10000 \
      --txpool.pricelimit 30 \
      --txpool.toaddrfilter="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f,0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D,0xEf1c6E67703c7BD7107eed8303Fbe6EC2554BF6B" \
      --maxpeers=100 \
      --syncmode=disabled \
      --dynamodb-access-key="${DYNAMODB_ACCESS_KEY}" \
      --dynamodb-secret-key="${DYNAMODB_SECRET_KEY}" \
      --postgres-conn-str="${PG_CONN_STR}"